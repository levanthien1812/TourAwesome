{% extends "main-2.html" %} {% load static %} {% block toursContent %}

<div class="tours-section detail-section">
  <div class="tour-detail">
    <h1 class="tour-name">{{tour.name}}</h1>
    <div class="detail-item tour-images carousel">
      <button class="control prev-btn">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
          class="w-6 h-6">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5" />
        </svg>
      </button>
      <div class="body images">
        {% for image in images %}
        <img src="{{MEDIA_URL}}{{image.image}}" alt="{{tour.name}}" />
        {% endfor %}
      </div>
      <button class="control next-btn">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
          class="w-6 h-6">
          <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
        </svg>
      </button>
      <div class="dots"></div>
    </div>
    <div class="detail-item tour-info">
      <p class="title">Thông tin tour</p>
      <div class="content">
        <div class="tour-id">
          <p>Mã tour:</p>
          <p>{{tour.id}}</p>
        </div>
        <div>
          <p>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">
              <path
                d="M215.7 499.2C267 435 384 279.4 384 192C384 86 298 0 192 0S0 86 0 192c0 87.4 117 243 168.3 307.2c12.3 15.3 35.1 15.3 47.4 0zM192 256c-35.3 0-64-28.7-64-64s28.7-64 64-64s64 28.7 64 64s-28.7 64-64 64z" />
              </svg>Địa điểm:
          </p>
          <p>{{tour.location}}</p>
        </div>
        <div>
          <p>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">
              <path
                d="M32 0C14.3 0 0 14.3 0 32S14.3 64 32 64V75c0 42.4 16.9 83.1 46.9 113.1L146.7 256 78.9 323.9C48.9 353.9 32 394.6 32 437v11c-17.7 0-32 14.3-32 32s14.3 32 32 32H64 320h32c17.7 0 32-14.3 32-32s-14.3-32-32-32V437c0-42.4-16.9-83.1-46.9-113.1L237.3 256l67.9-67.9c30-30 46.9-70.7 46.9-113.1V64c17.7 0 32-14.3 32-32s-14.3-32-32-32H320 64 32zM288 437v11H96V437c0-25.5 10.1-49.9 28.1-67.9L192 301.3l67.9 67.9c18 18 28.1 42.4 28.1 67.9z" />
              </svg>Thời gian:
          </p>
          <p>{{tour.duration}}</p>
        </div>
        <div>
          <p>Phương tiện:</p>
          <p>{% include 'Components/vehicles.html' with vehicles=vehicles %}</p>
        </div>
        <div>
          <p>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
              <path
                d="M128 0c17.7 0 32 14.3 32 32V64H288V32c0-17.7 14.3-32 32-32s32 14.3 32 32V64h48c26.5 0 48 21.5 48 48v48H0V112C0 85.5 21.5 64 48 64H96V32c0-17.7 14.3-32 32-32zM0 192H448V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V192zm64 80v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V272c0-8.8-7.2-16-16-16H80c-8.8 0-16 7.2-16 16zm128 0v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V272c0-8.8-7.2-16-16-16H208c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V272c0-8.8-7.2-16-16-16H336zM64 400v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V400c0-8.8-7.2-16-16-16H80c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V400c0-8.8-7.2-16-16-16H208zm112 16v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V400c0-8.8-7.2-16-16-16H336c-8.8 0-16 7.2-16 16z" />
              </svg>Khởi hành:
          </p>
          <p>{{tour.startDate}}</p>
        </div>
      </div>
    </div>
    <div class="detail-item tour-services">
      <p class="title">Dịch vụ kèm theo</p>
      <div class="content">
        <p>
          <span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
              <path
                d="M256 0c4.6 0 9.2 1 13.4 2.9L457.7 82.8c22 9.3 38.4 31 38.3 57.2c-.5 99.2-41.3 280.7-213.7 363.2c-16.7 8-36.1 8-52.8 0C57.3 420.7 16.5 239.2 16 140c-.1-26.2 16.3-47.9 38.3-57.2L242.7 2.9C246.8 1 251.4 0 256 0z" />
              </svg></span>Bảo hiểm
        </p>
        <p>
          <span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
              <path
                d="M416 0C400 0 288 32 288 176V288c0 35.3 28.7 64 64 64h32V480c0 17.7 14.3 32 32 32s32-14.3 32-32V352 240 32c0-17.7-14.3-32-32-32zM64 16C64 7.8 57.9 1 49.7 .1S34.2 4.6 32.4 12.5L2.1 148.8C.7 155.1 0 161.5 0 167.9c0 45.9 35.1 83.6 80 87.7V480c0 17.7 14.3 32 32 32s32-14.3 32-32V255.6c44.9-4.1 80-41.8 80-87.7c0-6.4-.7-12.8-2.1-19.1L191.6 12.5c-1.8-8-9.3-13.3-17.4-12.4S160 7.8 160 16V150.2c0 5.4-4.4 9.8-9.8 9.8c-5.1 0-9.3-3.9-9.8-9L127.9 14.6C127.2 6.3 120.3 0 112 0s-15.2 6.3-15.9 14.6L83.7 151c-.5 5.1-4.7 9-9.8 9c-5.4 0-9.8-4.4-9.8-9.8V16zm48.3 152l-.3 0-.3 0 .3-.7 .3 .7z" />
              </svg></span>Bữa ăn
        </p>
        <p>
          <span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
              <path
                d="M64 32C64 14.3 49.7 0 32 0S0 14.3 0 32V64 368 480c0 17.7 14.3 32 32 32s32-14.3 32-32V352l64.3-16.1c41.1-10.3 84.6-5.5 122.5 13.4c44.2 22.1 95.5 24.8 141.7 7.4l34.7-13c12.5-4.7 20.8-16.6 20.8-30V66.1c0-23-24.2-38-44.8-27.7l-9.6 4.8c-46.3 23.2-100.8 23.2-147.1 0c-35.1-17.6-75.4-22-113.5-12.5L64 48V32z" />
              </svg></span>Hướng dẫn viên
        </p>
        <p>
          <span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
              <path
                d="M64 64C28.7 64 0 92.7 0 128v80c26.5 0 48 21.5 48 48s-21.5 48-48 48v80c0 35.3 28.7 64 64 64H512c35.3 0 64-28.7 64-64V304c-26.5 0-48-21.5-48-48s21.5-48 48-48V128c0-35.3-28.7-64-64-64H64zm64 96l0 192H448V160H128zm-32 0c0-17.7 14.3-32 32-32H448c17.7 0 32 14.3 32 32V352c0 17.7-14.3 32-32 32H128c-17.7 0-32-14.3-32-32V160z" />
              </svg></span>Vé tham quan
        </p>
        <p>
          <span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
              <path
                d="M256 0C390.4 0 480 35.2 480 80V96l0 32c17.7 0 32 14.3 32 32v64c0 17.7-14.3 32-32 32l0 160c0 17.7-14.3 32-32 32v32c0 17.7-14.3 32-32 32H384c-17.7 0-32-14.3-32-32V448H160v32c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32l0-32c-17.7 0-32-14.3-32-32l0-160c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h0V96h0V80C32 35.2 121.6 0 256 0zM96 160v96c0 17.7 14.3 32 32 32H240V128H128c-17.7 0-32 14.3-32 32zM272 288H384c17.7 0 32-14.3 32-32V160c0-17.7-14.3-32-32-32H272V288zM112 400c17.7 0 32-14.3 32-32s-14.3-32-32-32s-32 14.3-32 32s14.3 32 32 32zm288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32s-32 14.3-32 32s14.3 32 32 32zM352 80c0-8.8-7.2-16-16-16H176c-8.8 0-16 7.2-16 16s7.2 16 16 16H336c8.8 0 16-7.2 16-16z" />
              </svg></span>Xe đưa đón
        </p>
      </div>
    </div>
    <div class="detail-item tour-description">
      <p class="title">Mô tả</p>
      <p class="content">{{tour.description}}</p>
    </div>
    <div class="detail-item tour-highlight">
      <p class="title">Điểm nổi bật</p>
      <p class="content">{{tour.highlight}}</p>
    </div>
    <div class="detail-item timeline">
      <p class="title">Chương trình tour</p>
      <div class="content">
        {% autoescape off %} {{timeline |safe}} {% endautoescape %}
      </div>
    </div>
  </div>
  <div class="tour-sidebar">
    <div class="tour-booking">
      <div class="prices">
        <p class="old-price">{{tour.old_price}} <sup>đ</sup></p>
        <p></p>
        <p class="price">
          <span>{{tour.price}}<sup>đ</sup></span> /người
        </p>
        <p class="price-differentiate">
          <img src="{% static 'images/discount.png' %}" alt="" />-{{tour.price_differentiate}}<sup>đ</sup>
        </p>
      </div>
      <div class="booking-info">
        <label for="startDate">Ngày khởi hành</label>
        <input type="date" name="startDate" id="startDate" />
        <label for="quantity">Số lượng khách</label>
        <input type="number" name="quantity" id="quantity" value="1" />
      </div>
      <div class="book-btn">
        <button>Đặt tour</button>
      </div>
    </div>
    <div class="tour-counselor">
      <div class="title">Tổng đài tư vấn</div>
      <div class="content">
        <p>
          Qúy khách có bất kì thắc mắc nào xin liên hệ
          <strong>0123456777</strong> để được hỗ trợ và giải đáp nhanh nhất
        </p>
      </div>
    </div>
  </div>

  {% include 'Tours/booking.html' with form=bookingDetailForm %}
</div>

<script src="{% static 'js/carousel.js' %}"></script>
<script>
  const bookTourBtn = document.querySelector(".tour-booking .book-btn button")
  const detailBookingPopup = document.querySelector(".booking-detail")
  const cover = document.querySelector(".cover")

  bookTourBtn.addEventListener("click", () => {
    detailBookingPopup.classList.add("show")
    cover.classList.add("show")
  });

  cover.addEventListener("click", () => {
    detailBookingPopup.classList.remove("show")
    cover.classList.remove("show")
  });
</script>

{% endblock toursContent %}